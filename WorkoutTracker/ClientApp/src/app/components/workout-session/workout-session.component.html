<div>
    <div class="d-flex flex-row mb-2">
        <input
            #workoutSessionDate
            [value]="workoutSession.date"
            (change)="updateWorkoutSessionDate(workoutSessionDate.value)"
            class="form-control mr-2"
            type="date"
        />
        <input
            #workoutSessionName
            [value]="workoutSession.name"
            (change)="updateWorkoutSessionName(workoutSessionName.value)"
            class="form-control mr-2"
        />
        <button
            [attr.aria-expanded]="!isCollapsed"
            (click)="isCollapsed = !isCollapsed"
            class="btn btn-dark mr-2"
            type="button"
            data-toggle="collapse"
            data-target="#workoutSession"
            aria-controls="workoutSession"
        >
            <svg
                *ngIf="isCollapsed"
                width="1em"
                height="1em"
                viewBox="0 0 16 16"
                class="bi bi-caret-down-fill"
                fill="currentColor"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
            </svg>
            <svg
                *ngIf="!isCollapsed"
                width="1em"
                height="1em"
                viewBox="0 0 16 16"
                class="bi bi-caret-up-fill"
                fill="currentColor"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z" />
            </svg>
        </button>
        <button (click)="deleteWorkoutSession()" class="btn btn-dark text-nowrap">Delete workout session</button>
    </div>
    <div
        [ngbCollapse]="isCollapsed"
        id="workoutSession" class="collapse
        ml-1"
    >
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Set #</th>
                    <th>Exercise</th>
                    <th>Weight</th>
                    <th>Reps Completed</th>
                    <th>Target Reps</th>
                    <th>Rest Time</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr
                    app-set-result
                    *ngFor="let setResult of setResults"
                    [setResult]="setResult"
                    [exercises]="exercises"
                    (setResultDuplicate)="duplicateSetResult($event)"
                    (setResultUpdateOrder)="updateSetResultOrder($event.setResultId, $event.order)"
                    (setResultDelete)="deleteSetResult($event)"
                >
                </tr>
                <tr>
                    <td class="align-middle">
                        <div *ngIf="setResults" class="pl-2">
                            {{ setResults.length + 1}}
                        </div>
                    </td>
                    <td>
                        <select #exerciseName [formControl]="newSetResultExerciseName" class="form-control">
                            <option value="null" disabled selected> -- Exercise -- </option>
                            <option *ngFor="let exercise of exercises">
                                {{ exercise.name }}
                            </option>
                        </select>
                    </td>
                    <td>
                        <input #weight [formControl]="newSetResultWeight" class="form-control" placeholder="Weight"/>
                    </td>
                    <td>
                        <input #repsActual [formControl]="newSetResultRepsActual" class="form-control" placeholder="Reps Completed"/>
                    </td>
                    <td>
                        <div class="align-items-center d-flex flex-row">
                            <input #repsTargetLow [formControl]="newSetResultRepsTargetLow" class="form-control mr-2" placeholder="Rep Range Low" />
                            <span class="mr-2">
                                <b>-</b>
                            </span>
                            <input #repsTargetHigh [formControl]="newSetResultRepsTargetHigh" class="form-control mr-2" placeholder="Rep Range High" />
                            <div class="form-check">
                                <input #toFailure
                                       (change)=toggleNewSetToFailure(toFailure.checked)
                                       [formControl]="newSetResultToFailure"
                                       class="form-check-input"
                                       type="checkbox">
                                <label class="form-check-label text-nowrap">To Failure</label>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input #restTime class="form-control" placeholder="Rest Time"/>
                    </td>
                    <td>
                        <button (click)="addSetResult(exerciseName.value, weight.value, repsActual.value, repsTargetLow.value, repsTargetHigh.value, toFailure.checked, restTime.value)" class="btn btn-dark text-nowrap">Add set</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
